<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>机器人gpt部署</title>
      <link href="/2024/04/13/%E6%9C%BA%E5%99%A8%E4%BA%BAgpt%E9%83%A8%E7%BD%B2/"/>
      <url>/2024/04/13/%E6%9C%BA%E5%99%A8%E4%BA%BAgpt%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<h1 id="机器人gpt部署"><a href="#机器人gpt部署" class="headerlink" title="机器人gpt部署"></a>机器人gpt部署</h1><p><img src="/2024/04/13/%E6%9C%BA%E5%99%A8%E4%BA%BAgpt%E9%83%A8%E7%BD%B2/image-20240413220018298.png"></p><p>如图，最近给一个项目上配了个机器人。</p><p>接下来介绍怎么部署</p><h2 id="选择市面上可用的gpt模型"><a href="#选择市面上可用的gpt模型" class="headerlink" title="选择市面上可用的gpt模型"></a>选择市面上可用的gpt模型</h2><p>有 阿里云的百炼，openai的chatgpt等等</p><p>我使用的是阿里云的百炼大模型</p><h3 id="创建api-key以及应用"><a href="#创建api-key以及应用" class="headerlink" title="创建api-key以及应用"></a>创建api-key以及应用</h3><p><img src="/2024/04/13/%E6%9C%BA%E5%99%A8%E4%BA%BAgpt%E9%83%A8%E7%BD%B2/image-20240413220908646.png"></p><h3 id="点击右上角用户头像创建api-key"><a href="#点击右上角用户头像创建api-key" class="headerlink" title="点击右上角用户头像创建api_key"></a>点击右上角用户头像创建api_key</h3><h3 id="添加应用选择RAG应用-然后拿到应用id"><a href="#添加应用选择RAG应用-然后拿到应用id" class="headerlink" title="添加应用选择RAG应用 然后拿到应用id"></a>添加应用选择RAG应用 然后拿到应用id</h3><h2 id="后端代码"><a href="#后端代码" class="headerlink" title="后端代码"></a>后端代码</h2><p>由于这个就一个接口，所以用的python的flask框架，比较简洁</p><p>可以根据自己需要添加 鉴权模块等</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"># For prerequisites running the following sample, visit https://help.aliyun.com/document_detail/611472.html</span><br><span class="line">import os</span><br><span class="line">from http import HTTPStatus</span><br><span class="line">from flask_cors import CORS</span><br><span class="line">import dashscope</span><br><span class="line">from dashscope import Application</span><br><span class="line">from flask import Flask, request, jsonify</span><br><span class="line"></span><br><span class="line">app = Flask(&quot;暖心&quot;)</span><br><span class="line"># 解决跨域 </span><br><span class="line">CORS(app, resources=&#123;r&quot;/*&quot;: &#123;&quot;origins&quot;: &quot;*&quot;&#125;&#125;, methods=[&quot;GET&quot;, &quot;POST&quot;], allow_headers=[&quot;Content-Type&quot;])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@app.route(&#x27;/generate&#x27;, methods=[&#x27;POST&#x27;])</span><br><span class="line">def generate_response():</span><br><span class="line">    # print(request.json)</span><br><span class="line">    # 解析请求中的消息数据</span><br><span class="line">    message = request.json.get(&#x27;message&#x27;)</span><br><span class="line"></span><br><span class="line">    # 检查发送方是否是浏览器</span><br><span class="line">    user_agent = request.headers.get(&#x27;User-Agent&#x27;)</span><br><span class="line">    dashscope.api_key = &#x27;填写自己的api_key&#x27;</span><br><span class="line">    if &#x27;Mozilla&#x27; not in user_agent and &#x27;Edge&#x27; not in user_agent:</span><br><span class="line">        # 如不果是浏览器发送的请求，则返回错误消息</span><br><span class="line">        return jsonify(&#123;&#x27;error&#x27;: &#x27;This API endpoint is not accessible via browser.&#x27;&#125;), HTTPStatus.BAD_REQUEST</span><br><span class="line">    app_id = os.environ.get(&quot;app_id&quot;)</span><br><span class="line">    response = Application.call(app_id=&#x27;填写自己的app_id&#x27;,</span><br><span class="line">                                prompt=message,</span><br><span class="line">                                )</span><br><span class="line"></span><br><span class="line">    if response.status_code == HTTPStatus.OK:</span><br><span class="line">        return response</span><br><span class="line">    else:</span><br><span class="line">        return jsonify(&#123;</span><br><span class="line">            &#x27;error&#x27;: &#123;</span><br><span class="line">                &#x27;request_id&#x27;: response.request_id,</span><br><span class="line">                &#x27;status_code&#x27;: response.status_code,</span><br><span class="line">                &#x27;error_code&#x27;: response.code,</span><br><span class="line">                &#x27;error_message&#x27;: response.message</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;), 500</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    app.run(host=&#x27;0.0.0.0&#x27;, port=8090)</span><br></pre></td></tr></table></figure><h2 id="使用docker部署到服务器"><a href="#使用docker部署到服务器" class="headerlink" title="使用docker部署到服务器"></a>使用docker部署到服务器</h2><h3 id="编写DockerFile"><a href="#编写DockerFile" class="headerlink" title="编写DockerFile"></a>编写DockerFile</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 使用 Python 3.8 作为基础镜像</span><br><span class="line">FROM python:3.8</span><br><span class="line"></span><br><span class="line"># 设置工作目录</span><br><span class="line">WORKDIR /chatGPTAPI</span><br><span class="line"></span><br><span class="line"># 复制当前目录中的所有文件到工作目录</span><br><span class="line">COPY . /chatGPTAPI</span><br><span class="line"></span><br><span class="line"># 安装项目依赖</span><br><span class="line">RUN pip install --no-cache-dir -r requirements.txt</span><br><span class="line"></span><br><span class="line"># 暴露应用端口</span><br><span class="line">EXPOSE 8090</span><br><span class="line"></span><br><span class="line"># 定义启动命令</span><br><span class="line">CMD [&quot;python&quot;, &quot;main.py&quot;]</span><br></pre></td></tr></table></figure><p>将项目文件夹上传到服务器</p><p>然后部署 .. (等作者想起来具体步骤</p><h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2><p>然后就可以通过前端调用了</p><h2 id="一些没用上的数据集"><a href="#一些没用上的数据集" class="headerlink" title="一些没用上的数据集"></a>一些没用上的数据集</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉很沮丧，不知道该怎么办。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;放松一下，深呼吸，你并不孤单。我们可以一起度过这段时间。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;谢谢你，我感觉好多了。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;不客气，随时来找我聊天。我们一起渡过每一个难关。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;最近感觉身心俱疲，没有动力做任何事情。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;不要太过勉强自己，给自己一些放松的时间。尝试做一些轻松愉快的事情，让自己重新充满活力。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;好的，我会试一试的。谢谢你的建议。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;不客气，记得要好好照顾自己。如果需要我陪伴，随时都可以来找我。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;失眠已经困扰我好几个晚上了，怎么办？&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;尝试一些放松的技巧，比如深呼吸、听轻音乐或者喝一杯温热的牛奶。也可以考虑调整睡眠环境，保持规律的作息时间。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;好的，我会尝试的。谢谢你的建议。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;希望你早日恢复良好的睡眠质量。如果需要我的陪伴，我随时都在这里。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己无助又焦虑，不知道该怎么办。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;深呼吸，放松一下，这只是一时的困难，你会度过的。你可以尝试做一些让自己开心的事情，也可以找我聊天。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;谢谢你，我会尝试的。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;不用客气，我们一起渡过难关。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉自己一无是处，对生活失去了信心。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;别太难过，每个人都有低潮期，你并不孤单。要相信自己，每一步都是向前的一步。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;谢谢你，我会尝试的。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;随时都可以来找我聊天，我会一直陪伴在你身边的。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉自己好像陷入了困境，无法自拔。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;不要放弃希望，每个困境都有解决的办法。你可以尝试换个角度思考问题，也可以和朋友家人分享你的困扰。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;好的，我会试一试的。谢谢你。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;不用客气，我会一直支持你的。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉自己好像迷失了方向，不知道该怎么办。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;人生路上总会有迷茫的时候，你可以尝试回顾过去，找到你的兴趣和梦想，也可以寻求他人的帮助和建议。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;好的，我会试一试的。谢谢你的支持。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;不用客气，我相信你会找到属于自己的方向的。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉自己好像被困在黑暗中，看不到一丝光明。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;黑暗终将过去，黎明会到来。你可以尝试做一些让自己开心的事情，也可以和朋友家人分享你的感受，他们会陪伴你度过难关的。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;谢谢你，我会试一试的。谢谢你的支持。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;不用客气，我相信你会找到属于自己的方向的。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉很绝望，无法找到任何出路。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;绝望时不要放弃，或许下一步就是出路。你可以尝试和心理专家交流，寻求更多帮助和建议。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我已经试过了，但似乎没有用。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使没有立刻看到变化，也不要放弃希望。坚持下去，慢慢会有好转的。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己毫无希望，人生仿佛失去了意义。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;人生中总会遇到低谷，但低谷之后就是高峰。你可以尝试重新审视生活，找到新的目标和意义。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得已经没有力气再尝试了。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使感到疲惫，也要努力寻找希望的火种。我会一直陪伴在你身边的。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感到无助和孤独，仿佛没有人能理解我。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使孤独，也不要放弃寻找希望。你可以尝试参加社交活动，结识新的朋友，或者和家人分享你的感受。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我已经尝试过，但还是觉得孤独。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使感到孤独，也不要放弃寻找幸福。你不是孤单的，我会一直支持你的。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉自己毫无用处，对自己失去了信心。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;每个人都有价值，你也不例外。别太过自责，尝试接受自己，并为改变而努力。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得无法改变自己的现状。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使感到无望，也不要停止努力。持续寻找改变的机会，你会找到属于自己的光明。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉自己像个失败者，无法胜任任何事情。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;失败并不意味着终结，而是迈向成功的一步。你可以尝试从失败中学习，重新规划自己的路线。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得再也无法振作了。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使感到沮丧，也不要停止前进的脚步。你可以重新找到自己的动力和目标。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉生活没有意义，一切都变得毫无意义。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使感到迷茫，也不要停止寻找生活的意义。你可以尝试从小事中找到快乐，重新审视生活的美好之处。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得已经无法再找到任何快乐了。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使感到绝望，也不要停止寻找快乐。我会一直陪伴在你身边的，共同度过每一个难关。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己一事无成，毫无进展。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使感到挫败，也不要停止努力。每一次尝试都是成长的一部分。你可以尝试寻找新的方法和策略。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我已经尝试过了，但还是无法取得进展。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使感到无望，也不要停止前进。坚持下去，一切都会好起来的。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己没有价值，对任何事情都没有兴趣。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;每个人都有自己的价值，你也不例外。你可以尝试寻找自己的兴趣和热情，或者尝试新的事物。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得再也找不到任何兴趣了。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使感到失去兴趣，也不要停止尝试。寻找新的事物和体验，或许会重新点燃你的热情。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉自己一无是处，无法做出任何贡献。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;每个人都有自己的价值和潜力，你也是如此。你可以尝试寻找自己的优点和长处，或者寻求他人的帮助和建议。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己无法拥有任何优点和长处。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使感到无法看到自己的优点，也不要放弃希望。坚持下去，你会发现自己的价值和潜力。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己被困在黑暗中，找不到出路。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使感到困难重重，也不要放弃希望。你可以尝试寻找新的方法和策略，或者寻求他人的帮助和支持。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得已经没有任何希望了。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使感到绝望，也不要停止寻找出路。坚持下去，你会发现新的希望和机会。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉自己无法控制自己的情绪，一切都失控了。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;情绪波动是正常的，但你可以尝试一些情绪调节的方法，比如深呼吸、运动或者冥想。寻求心理专家的帮助也是一个好的选择。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得已经无法控制自己的情绪了。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使感到无法控制情绪，也不要停止尝试。寻求专业的帮助和支持，你会找到控制情绪的方法。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉自己永远无法摆脱困境，一切都无法改变。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使感到绝望，也不要放弃希望。每个困境都有解决的办法，你可以尝试从不同的角度思考问题，或者寻求他人的帮助和建议。&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得再也没有任何希望了。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;即使感到绝望，也不要停止寻找出路。坚持下去，你会找到新的希望和机会。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己充满了能量，准备迎接新的挑战。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太棒了！保持这种积极的态度，你一定能够克服一切困难，取得成功。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉今天非常幸运，一切都在顺利进行。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太棒了！享受这种幸运和顺利，相信自己的能力，你会迎来更多美好的事物。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己有很多潜力，准备大展拳脚。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太棒了！相信自己的潜力，勇敢地追逐梦想，你会取得令人惊讶的成就。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感到非常乐观，对未来充满信心。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太好了！乐观的态度会带来积极的结果。相信自己，勇敢地迎接未来的挑战，一切都会变得更好。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己充满活力，可以做任何事情。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太棒了！充满活力的态度会带来无限可能。相信自己的能力，勇敢地追逐梦想，你会取得惊人的成就。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感到非常幸福和满足，对生活充满感激。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太好了！感恩的心态会让生活更加美好。享受幸福和满足，珍惜每一刻，你会发现生活中的无尽美好。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己拥有无限的可能性，准备迎接新的挑战。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太棒了！相信自己的潜力，勇敢地追逐梦想，你一定能够取得成功。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感到非常兴奋和激动，对未来充满期待。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太棒了！兴奋和激动的心情会带来更多美好的事物。期待未来的到来，相信自己，你会创造出美好的未来。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己拥有无限的可能性，可以实现任何梦想。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太好了！相信自己的能力，勇敢地追逐梦想，你一定会取得成功。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感到非常幸福和满足，对生活充满感激。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太好了！感恩的心态会让生活更加美好。享受幸福和满足，珍惜每一刻，你会发现生活中的无尽美好。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉今天非常有活力，准备迎接新的挑战。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太棒了！保持这种积极的态度，你一定能够克服一切困难，取得成功。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己充满了能量，准备全力以赴地投入工作。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太好了！充满能量的你将会创造出令人惊喜的成果。相信自己，你一定能够取得成功。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感到非常乐观，对未来充满信心。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太好了！乐观的态度是成功的关键。相信自己，你会迎来更多美好的事物。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己可以做任何事情，准备挑战自己的极限。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太棒了！挑战自己的极限是成长的最好方式。相信自己的能力，你会创造出令人瞩目的成就。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感到非常幸福和满足，对生活充满感激。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太好了！感恩的心态会让生活更加美好。享受幸福和满足，珍惜每一刻，你会发现生活中的无尽美好。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己充满活力，准备大展拳脚，创造属于自己的辉煌。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太棒了！充满活力的你将会创造出辉煌的未来。相信自己，你一定会取得成功。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感到非常兴奋和激动，对未来充满期待。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太好了！兴奋和激动的心情是成功的先导。期待未来的到来，相信自己，你一定会取得惊人的成就。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己有很多潜力，可以实现任何梦想。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太棒了！相信自己的潜力，勇敢地追逐梦想，你一定会取得成功。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感到非常幸福和满足，对生活充满感激。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太好了！感恩的心态会让生活更加美好。享受幸福和满足，珍惜每一刻，你会发现生活中的无尽美好。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己充满了能量，准备克服一切困难。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太好了！充满能量的你将会克服一切困难，取得成功。相信自己，你一定能够实现自己的目标。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感到非常有动力，准备全力以赴地投入工作。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太棒了！充满动力的你将会取得令人惊喜的成果。相信自己，你一定能够实现自己的目标。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己充满了自信，准备迎接新的挑战。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;太好了！自信的你将会迎接一切挑战，取得成功。相信自己，你一定能够实现自己的目标。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉非常沮丧，无法摆脱困境。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;别太难过，每个人都有低谷期，你并不孤单。我们可以一起度过难关。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己无助又焦虑，不知道该怎么办。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;不要害怕，我们可以一起找到解决问题的办法。你并不孤单，我会一直陪伴在你身边。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉自己非常疲惫，无法找到动力。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;疲惫是暂时的，不要放弃希望。尝试做一些让自己放松的事情，保持乐观的心态，一切都会好起来的。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己陷入了困境，无法自拔。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;困境终将过去，你并不孤单。我们可以一起寻找解决问题的办法。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感觉自己很绝望，看不到未来。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;不要失去信心，每个人都会遇到困难。我会一直陪伴在你身边，帮助你度过难关。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己毫无希望，对生活失去了信心。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;不要绝望，每个人都会遇到困难。我会一直支持你，帮助你重新找回信心。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感到非常失落，不知道该往哪里走。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;失落是暂时的，不要放弃希望。我们可以一起找到新的方向，重新出发。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己一事无成，对自己失望透顶。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;不要太过苛刻对待自己，每个人都会有失败的时候。尝试换个角度看待问题，找到自己的优点和长处。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感到非常焦虑，不知道该如何是好。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;焦虑是暂时的，不要被它困扰。尝试做一些让自己放松的事情，保持乐观的心态，一切都会慢慢好起来的。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我觉得自己非常无助，不知道该向谁求助。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;不要害怕，我们可以一起寻找解决问题的办法。你并不孤单，我会一直陪伴在你身边。&quot;&#125;]&#125;</span><br><span class="line">&#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;我感到非常沮丧，觉得自己一无是处。&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;不要过分自责，每个人都会有低谷期。尝试做自己&quot;&#125;]&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>浅谈IM</title>
      <link href="/2024/04/13/IM-%E5%8D%B3%E6%97%B6%E9%80%9A%E8%AE%AF/"/>
      <url>/2024/04/13/IM-%E5%8D%B3%E6%97%B6%E9%80%9A%E8%AE%AF/</url>
      
        <content type="html"><![CDATA[<h2 id="1、简介"><a href="#1、简介" class="headerlink" title="1、简介"></a>1、简介</h2><blockquote><p>在最近的项目中，需要实现一个聊天功能，以我目前的知识体系去实现一个简单的IM</p></blockquote><p>使用的技术栈是 ：WebSocket + Redis + Mysql</p><p>其中，Mysql用来存储所有发送的消息，实现消息持久化。WebSocket可以对在线用户快速转发，Redis用来存储离线消息</p><p><strong>IM本质上就是两件事情，消息的同步和存储：</strong></p><blockquote><p><strong>1）消息的同步：</strong>将消息完整的、快速的从发送方传递到接收方，就是消息的同步。消息同步系统最重要的衡量指标就是消息传递的实时性、完整性以及能支撑的消息规模。从功能上来说，一般至少要支持在线和离线推送，高级的IM系统还支持『多端同步』；<br><strong>2）消息的存储：</strong>消息存储即消息的持久化保存，这里不是指消息在客户端本地的保存，而是指云端的保存，功能上对应的就是『消息漫游』。『消息漫游』的好处是可以实现账号在任意端登陆查看所有历史消息，这也是高级IM系统特有的功能之一。</p></blockquote><h2 id="2、相关文章"><a href="#2、相关文章" class="headerlink" title="2、相关文章"></a>2、相关文章</h2><p><a href="https://zhuanlan.zhihu.com/p/31377253">现代IM系统中聊天消息的同步和存储方案探讨 - 知乎 (zhihu.com)</a></p><p><a href="http://www.52im.net/thread-3887-1-1.html"><strong>浅谈IM系统中离线消息、历史消息的最佳实践</strong></a></p><h2 id="3、消息投递的做法"><a href="#3、消息投递的做法" class="headerlink" title="3、消息投递的做法"></a>3、消息投递的做法</h2><p>在项目中，对于实时消息、离线消息、历史消息大概是这样的技术思路。</p><p><strong>不管是否在线</strong>:消息都会用Mysql存储</p><p><strong>对于在线用户：</strong>消息会使用WebSocket直接实时发送到在线的接收方，消息发送完成后，</p><p><strong>而对于离线的用户：</strong>服务器端会将消息存入到离线库(Redis)，当用户登录后，从离线库中将离线消息拉走，然后服务器端将离线消息删除。</p><h2 id="4、历史消息的保存以及冷热分离"><a href="#4、历史消息的保存以及冷热分离" class="headerlink" title="4、历史消息的保存以及冷热分离"></a>4、历史消息的保存以及冷热分离</h2><p>历史消息存储了用户所有的聊天消息，这些消息包括发出的消息以及接收到的消息。</p><p>使用Mysql保存，前端通过会话分页获取</p><p>超过一定时间(此项目 4个月 根据自己业务设置)的消息数据放入<code>冷库</code>存储</p><p>超过 半年的数据清除并提醒用户</p><h2 id="5、离线消息的保存以及清除"><a href="#5、离线消息的保存以及清除" class="headerlink" title="5、离线消息的保存以及清除"></a>5、离线消息的保存以及清除</h2><p>因为是使用Redis存储的，众所周知Redis一般用来当缓存，比较金贵，所以不存太久</p><p>过了一定时间(7天)(定时任务，每天查一次)后如果用户仍旧未上线，会清除该用户的消息缓存，但设置一个标志位，代表有离线消息，在从数据库里查。</p><h2 id="6、IM离线消息、历史消息在存储逻辑上的区别-扩散写-扩散读"><a href="#6、IM离线消息、历史消息在存储逻辑上的区别-扩散写-扩散读" class="headerlink" title="6、IM离线消息、历史消息在存储逻辑上的区别(扩散写 扩散读)"></a>6、IM离线消息、历史消息在存储逻辑上的区别(扩散写 扩散读)</h2><ul><li><em><strong>1）</strong></em>离线消息我们存储介质选用的是 <a href="https://redis.io/">Redis</a>；</li><li><em><strong>2）</strong></em>历史消息我们选用的是 Mysql;</li></ul><p>对于为什么选用不同的存储介质，其实我们考虑的是离线消息和历史消息不同的业务场景和读写模式。</p><p>下面我们重点介绍一下离线消息和历史消息存储的区别。</p><h3 id="6-1离线消息存储模式——“扩散写”"><a href="#6-1离线消息存储模式——“扩散写”" class="headerlink" title="6.1离线消息存储模式——“扩散写”"></a>6.1离线消息存储模式——“扩散写”</h3><p>离线消息的存储模式我们用的是扩散写。</p><p><img src="http://www.52im.net/data/attachment/forum/202204/18/123123edit9i9s9astwlfq.png" alt="IM开发干货分享：浅谈IM系统中离线消息、历史消息的最佳实践_2.png"></p><p><em>1）</em>扩散写的缺点是：写入会被成指数地放大，特别是针对群这种场景。</p><p>由于我的业务场景只有单聊，所以缺点可以避免</p><h3 id="6-2-历史消息存储模式——“扩散读”"><a href="#6-2-历史消息存储模式——“扩散读”" class="headerlink" title="6.2 历史消息存储模式——“扩散读”"></a>6.2 历史消息存储模式——“扩散读”</h3><p>历史消息的存储模式我们用的是扩散读。</p><p>因为历史消息中，每个会话都保存了整个会话的全量消息。<strong>在扩散读这种模式下，每个会话的消息只保存一次</strong>。</p><p><img src="http://www.52im.net/data/attachment/forum/202204/18/140340fo7uttmu88ulkou4.png" alt="IM开发干货分享：浅谈IM系统中离线消息、历史消息的最佳实践_3.png"></p><h2 id="7-小结"><a href="#7-小结" class="headerlink" title="7.小结"></a>7.小结</h2><p>在开发一个即时通讯（IM）系统时，消息的同步和存储是两个重要的方面。最近我在项目中实现了一个简单的聊天功能，使用了WebSocket、Redis和MySQL作为技术栈。</p><p>对于消息的投递，无论用户在线与否，消息都会被存储到MySQL中。对于在线用户，消息会通过WebSocket实时发送到接收方；对于离线用户，消息会被存储到Redis中，等用户登录后再从Redis中获取。历史消息则会被保存在MySQL中，前端可以通过会话分页获取。</p><p>针对历史消息，我们采用了冷热分离的策略，将超过一定时间的消息存入冷库，并定期清除超过半年的数据。对于离线消息，我们设置了一个清除策略，过了一定时间后清除用户的消息缓存，但标记用户有离线消息，并在需要时从数据库中获取。</p><p>在存储逻辑上，离线消息和历史消息采用了不同的存储介质。离线消息使用了Redis，而历史消息使用了MySQL。这是因为离线消息和历史消息的业务场景和读写模式不同。离线消息采用了扩散写的模式，而历史消息采用了扩散读的模式，以更好地满足不同的业务需求。</p><p>综上所述，通过合理选择存储介质和采用不同的存储模式，我们可以有效地实现消息的同步和存储，为IM系统的开发提供了一种可行的方案。</p>]]></content>
      
      
      <categories>
          
          <category> IM, </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
